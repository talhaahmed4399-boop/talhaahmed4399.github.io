<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PK LIONS ESPORTS</title>
<meta name="viewport" content="width=device-width">

<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:Arial,Helvetica,sans-serif;
background:#050812;
color:white;
}

/* HERO */
.hero{
height:100vh;
background:url("https://drive.google.com/uc?export=view&id=1uAue7LhtvtddKM7JCW-1t1UPfrFhHSkx") center/cover no-repeat;
display:flex;
align-items:center;
justify-content:center;
position:relative;
}
.overlay{
position:absolute;
inset:0;
background:rgba(0,0,0,.75);
}
.hero-inner{
z-index:2;
text-align:center;
}
.logo{
width:120px;
border-radius:50%;
box-shadow:0 0 20px cyan;
margin-bottom:10px;
}
h1{
margin:0;
font-size:44px;
text-shadow:0 0 25px cyan;
}
button{
padding:12px 28px;
border:none;
border-radius:30px;
background:#00ffd5;
font-weight:bold;
cursor:pointer;
margin:10px;
}

/* SECTIONS */
.section{
max-width:1000px;
margin:auto;
padding:20px;
}
.card{
background:#0d1224;
padding:20px;
border-radius:15px;
margin:15px 0;
box-shadow:0 0 25px #00ffd533;
}
.light{
width:12px;
height:12px;
border-radius:50%;
background:#00ff00;
display:inline-block;
box-shadow:0 0 15px #00ff00;
margin-right:6px;
}
input{
width:100%;
padding:10px;
margin:6px 0;
border-radius:10px;
border:none;
}
.hidden{display:none}

/* PLAYER CARDS */
.players{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
gap:12px;
}
.player{
background:#111;
padding:10px;
border-radius:10px;
text-align:center;
transition:.3s;
}
.player:hover{
transform:translateY(-5px);
box-shadow:0 0 15px cyan;
}

/* BRACKET */
.match{
background:#111;
padding:10px;
border-radius:10px;
margin:8px 0;
animation:float 2s infinite alternate;
}
@keyframes float{
to{transform:translateY(-6px)}
}

.news{
border-left:4px solid cyan;
padding-left:10px;
margin:6px 0;
}
.countdown{
font-size:22px;
margin:10px 0;
}
.footer{
text-align:center;
opacity:.6;
padding:20px;
}
</style>
</head>
<body>

<!-- HERO -->
<div class="hero">
<div class="overlay"></div>
<div class="hero-inner">
<img class="logo" src="https://drive.google.com/uc?export=view&id=1uAue7LhtvtddKM7JCW-1t1UPfrFhHSkx">
<h1>PK LIONS ESPORTS</h1>
<p>Last Circle Clash ‚Äì Season 1</p>
<div class="countdown" id="timer"></div>
<button onclick="openDash()">REGISTER NOW</button>
<a href="https://chat.whatsapp.com/JLhkyWtPQbAE06StUBN8m2">
<button>JOIN COMMUNITY</button></a>
</div>
</div>

<div class="section">

<!-- Registration Info -->
<div class="card">
<span class="light"></span><b>Registration Open</b><br><br>
Prize Pool: <b>50,000 PKR</b>
</div>

<!-- Latest News -->
<div class="card">
<h3>Latest News</h3>
<div class="news">üî• Registration Started ‚Äì 50K Prize Pool</div>
<div class="news">üì¢ PUBG Mobile Last Circle Clash Season 1</div>
<div class="news">‚è≥ Upcoming Matches Soon</div>
</div>

<!-- Featured Players -->
<div class="card">
<h3>Featured Players</h3>
<div class="players">
<div class="player">Player 1</div>
<div class="player">Player 2</div>
<div class="player">Player 3</div>
<div class="player">Player 4</div>
</div>
</div>

<!-- Live Bracket -->
<div class="card">
<h3>Live Bracket</h3>
<div class="match">Team Alpha vs Team Bravo</div>
<div class="match">Winner Advances</div>
</div>

<!-- Registration Form -->
<div id="dash" class="card hidden">
<h2>Team Registration</h2>
<input id="team" placeholder="Team Name">
<input id="tag" placeholder="Team Tag">
<input id="p1" placeholder="Player 1">
<input id="p2" placeholder="Player 2">
<input id="p3" placeholder="Player 3">
<input id="p4" placeholder="Player 4">
<input id="igl" placeholder="IGL WhatsApp">
<input id="sponsor" placeholder="Sponsor WhatsApp">
<button onclick="submit()">Submit Registration</button>
</div>

<div id="done" class="card hidden">
<h2>‚úÖ Congratulations</h2>
<p>Your team registration has been submitted.</p>
<p>PK Lions will contact you soon.</p>
</div>

<!-- NEW SECTION: Registered Teams & Stats -->
<div class="card" id="registeredTeamsCard">
<h3>Registered Teams</h3>
<ul id="registeredTeams"></ul>
</div>

<div class="card" id="teamStatsCard">
<h3>Team Stats</h3>
<p>Total Teams: <span id="totalTeams">0</span></p>
<p>Total Players: <span id="totalPlayers">0</span></p>
</div>

<div class="card" id="addRosterCard">
<h3>Add / Update Team Roster</h3>
<input id="teamSearch" placeholder="Enter Your Team Name">
<input id="newPlayer" placeholder="Add Player Name">
<button onclick="addPlayer()">Add Player</button>
<ul id="rosterList"></ul>
</div>

<div class="card" id="recentMatchesCard">
<h3>Recent Matches</h3>
<ul id="recentMatches">
<li>Team Alpha 2-1 Team Bravo</li>
<li>Team Charlie 0-2 Team Delta</li>
</ul>
</div>

<div class="card" id="searchTeamsCard">
<h3>Search Teams</h3>
<input id="searchInput" placeholder="Search team">
<ul id="searchResults"></ul>
</div>

</div>

<div class="footer">
PK LIONS ESPORTS ¬© 2026
</div>

<script>
// GOOGLE SHEET URL
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbyRONRicyN3pC3Q76JKNqJo-vuDzEpBg4v41_WIxBiyD1kuvxg9_5-IkGmnvhUaeapA/exec";

const dash = document.getElementById("dash");
const done = document.getElementById("done");

// Elements
const registeredTeamsEl = document.getElementById("registeredTeams");
const totalTeamsEl = document.getElementById("totalTeams");
const totalPlayersEl = document.getElementById("totalPlayers");
const rosterListEl = document.getElementById("rosterList");
const searchInputEl = document.getElementById("searchInput");
const searchResultsEl = document.getElementById("searchResults");
const teamSearchEl = document.getElementById("teamSearch");
const newPlayerEl = document.getElementById("newPlayer");

// Local Data
let teamsData = [];

// Open Dashboard
function openDash(){
    dash.classList.remove("hidden");
    window.scrollTo(0,document.body.scrollHeight);
}

// Submit Registration
function submit(){
    const data = {
        team:team.value,
        tag:tag.value,
        p1:p1.value,
        p2:p2.value,
        p3:p3.value,
        p4:p4.value,
        igl:igl.value,
        sponsor:sponsor.value
    };

    fetch(SCRIPT_URL,{
        method:"POST",
        mode:"no-cors",
        body: JSON.stringify(data)
    });

    // Add locally
    teamsData.push({
        team: data.team,
        roster:[data.p1,data.p2,data.p3,data.p4]
    });

    updateTeams();
    dash.classList.add("hidden");
    done.classList.remove("hidden");
}

// Fetch Teams from Sheet
async function fetchTeams(){
    try{
        const res = await fetch(SCRIPT_URL + "?action=read");
        const json = await res.json();
        teamsData = json.map(t => ({
            team: t.team,
            roster: [t.p1,t.p2,t.p3,t.p4]
        }));
        updateTeams();
    }catch(err){
        console.log("Unable to fetch sheet data:", err);
    }
}

// Update Registered Teams & Stats
function updateTeams(){
    registeredTeamsEl.innerHTML="";
    rosterListEl.innerHTML="";
    searchResultsEl.innerHTML="";

    let totalPlayers = 0;
    teamsData.forEach(t=>{
        const li = document.createElement("li");
        li.textContent = t.team + " [" + t.roster.join(", ") + "]";
        registeredTeamsEl.appendChild(li);
        totalPlayers += t.roster.length;
    });

    totalTeamsEl.textContent = teamsData.length;
    totalPlayersEl.textContent = totalPlayers;
}

// Add Player to Roster
function addPlayer(){
    const teamName = teamSearchEl.value.trim();
    const playerName = newPlayerEl.value.trim();
    if(!teamName || !playerName){ alert("Enter both fields"); return; }

    const team = teamsData.find(t => t.team.toLowerCase() === teamName.toLowerCase());
    if(team){
        team.roster.push(playerName);
        newPlayerEl.value="";
        updateTeams();
        showRoster(team);
    }else{
        alert("Team not found");
    }
}

// Show Roster
function showRoster(team){
    rosterListEl.innerHTML="";
    team.roster.forEach(p=>{
        const li = document.createElement("li");
        li.textContent = p;
        rosterListEl.appendChild(li);
    });
}

// Search Teams
searchInputEl.addEventListener("input", function(){
    const query = this.value.toLowerCase();
    searchResultsEl.innerHTML="";
    teamsData.filter(t=>t.team.toLowerCase().includes(query))
             .forEach(t=>{
                const li = document.createElement("li");
                li.textContent = t.team + " [" + t.roster.join(", ") + "]";
                searchResultsEl.appendChild(li);
             });
});

// Countdown
const target=new Date("Feb 20, 2026 00:00:00").getTime();
setInterval(()=>{
    let d=target-new Date().getTime();
    timer.innerHTML=
    Math.floor(d/86400000)+"d "+
    Math.floor(d%86400000/3600000)+"h "+
    Math.floor(d%3600000/60000)+"m "+
    Math.floor(d%60000/1000)+"s";
},1000);

// Initial Fetch
fetchTeams();
</script>

</body>
</html>
